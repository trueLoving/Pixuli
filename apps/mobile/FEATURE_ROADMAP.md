# 📱 Pixuli Mobile 功能优化路线图

本文档列出了 Pixuli Mobile 应用的后续功能优化建议，按优先级排序。

## ✅ 已实现功能

- ✅ 图片网格展示（2列布局）
- ✅ 单张图片上传
- ✅ **批量删除功能**（已实现）
  - ✅ 批量删除图片
- ✅ **相机集成**（已实现）
  - ✅ 直接拍照上传功能
  - ✅ 拍照后即时编辑
  - ✅ 图片来源选择（拍照/相册）
  - ✅ 相机权限自动请求
- ✅ 上传前编辑（描述、标签）
- ✅ 全屏预览（左右滑动、底部缩略图）
- ✅ 元数据查看（名称、尺寸、描述、标签）
- ✅ 删除功能
- ✅ 下拉刷新
- ✅ **GitHub 配置管理**（已实现）
- ✅ **Gitee 配置管理**（已实现）
  - ✅ Gitee 配置页面（独立配置界面）
  - ✅ 配置导入/导出功能
  - ✅ 配置清除功能（清除时自动清空表单）
  - ✅ GitHub 和 Gitee 配置可共存，互不影响
  - ✅ 清除一个配置时自动切换到另一个配置（如果存在）
- ✅ 主题切换（浅色/深色/自动）
- ✅ 多语言支持（中文/英文）
- ✅ 搜索和筛选功能
- ✅ 元数据缓存优化
- ✅ 刷新元数据功能
- ✅ **图片处理功能**（已实现）
  - ✅ 图片压缩（可调节压缩质量 10%-100%）
  - ✅ 格式转换（JPEG、PNG、WebP）
  - ✅ 尺寸调整（可自定义宽度和高度，支持保持宽高比）
  - ✅ 图片裁剪（可拖动裁剪框，调整大小）
  - ✅ 处理效果预览（显示处理前后的图片对比、文件大小、压缩率等）
- ✅ **图片详情增强**（已实现）
  - ✅ 图片信息面板：显示文件大小、上传时间、URL、ID、创建时间、更新时间
  - ✅ 分享功能：分享图片链接（先下载到本地再分享）
  - ✅ 复制链接：一键复制图片 URL
  - ✅ 分享按钮集成到顶部工具栏

---

## 🔴 高优先级（核心功能）

### 1. 批量上传功能

**功能描述**：

- **批量上传**（待实现）：
  - 支持同时选择多张图片上传
  - 批量上传进度展示（显示每张图片的上传状态）
  - 批量上传状态管理（成功/失败/进行中）
  - 批量上传错误处理（部分失败时的处理）
- **批量上传界面**：
  - 上传进度对话框（显示总体进度和单张进度）
  - 上传结果反馈（成功/失败统计）
  - 支持取消批量上传

**实现建议**：

- 在 `ImageUploadButton` 中使用 `uploadMultipleImages` 方法
- 实现批量上传进度展示 UI
- 优化批量上传的错误处理和重试机制
- 添加批量上传取消功能

**预期效果**：

- 提升批量上传效率
- 提供清晰的上传进度反馈
- 改善用户体验

**优先级**：🔴 高

---

### 2. 批量编辑功能

**功能描述**：

- **多选模式**（待实现）：
  - 长按图片进入多选模式
  - 点击选择多张图片
  - 显示选中数量
- **批量编辑元数据**（待实现）：
  - 批量修改标签（为多张图片添加/删除相同标签）
  - 批量修改描述（为多张图片设置相同描述）
  - 批量修改名称（支持批量重命名）
- **批量编辑界面**：
  - 添加选择工具栏（显示选中数量、批量操作按钮）
  - 批量编辑模态框（统一编辑多张图片的元数据）

**实现建议**：

- 在 `ImageGrid` 组件中添加多选状态
- 添加选择工具栏（显示选中数量、批量操作按钮）
- 在 `imageStore` 中添加批量编辑方法
- 实现批量元数据更新 API 调用

**预期效果**：

- 提升批量管理效率
- 减少重复操作
- 改善用户体验

**优先级**：🔴 高

---

### 3. 相机集成 ✅ 已实现

**功能描述**：

- ✅ 直接拍照上传：在应用内直接调用相机拍照
- ✅ 拍照后即时编辑：拍照后立即进入编辑界面
- ✅ 支持选择图片来源：拍照或从相册选择

**实现细节**：

- ✅ 在 `ImageUploadButton` 中添加了图片来源选择菜单
- ✅ 使用 `expo-image-picker` 的相机模式（`launchCameraAsync`）
- ✅ 集成拍照后的编辑流程（自动进入编辑模态框）
- ✅ 添加了相机权限请求和处理
- ✅ 支持中英文国际化

**预期效果**：

- ✅ 简化拍照上传流程
- ✅ 提升移动端使用体验
- ✅ 减少操作步骤

**优先级**：🔴 高

---

### 4. 图片详情增强 ✅ 已实现

**功能描述**：

- ✅ 图片信息面板：显示文件大小、上传时间、URL、ID、创建时间、更新时间
- ✅ 分享功能：分享图片链接（先下载到本地再分享，支持超时控制）
- ✅ 复制链接：一键复制图片 URL（使用 expo-clipboard）
- ✅ 分享按钮集成到顶部工具栏，与删除按钮同级

**实现细节**：

- ✅ 在 `ImageBrowser` 中增加了详细信息面板
- ✅ 使用 `expo-sharing` 实现分享功能
- ✅ 使用 `expo-clipboard` 实现复制到剪贴板功能
- ✅ 使用 `Promise.race` 实现下载超时控制（30秒）
- ✅ 简化界面，移除查看完整元数据的展开/收起功能

**预期效果**：

- ✅ 提供更完整的图片信息
- ✅ 方便分享和协作
- ✅ 提升用户体验

**优先级**：🔴 高

---

## 🟡 中优先级（体验优化）

### 5. 网格布局优化

**功能描述**：

- 可调整列数：支持 2/3/4 列切换
- 瀑布流布局：类似 Pinterest 的布局
- 列表视图：提供列表模式查看

**实现建议**：

- 在设置中添加布局选项
- 创建 `ImageList` 组件（列表视图）
- 实现动态列数调整

**预期效果**：

- 满足不同用户偏好
- 提升浏览体验
- 适应不同屏幕尺寸

**优先级**：🟡 中

---

### 6. 加载体验优化

**功能描述**：

- 骨架屏：使用骨架屏替代加载指示器
- 图片懒加载优化：优化大量图片的加载性能
- 预加载：预加载下一屏的图片

**实现建议**：

- 创建 `ImageSkeleton` 组件
- 优化 `ImageGrid` 的懒加载逻辑
- 实现智能预加载策略

**预期效果**：

- 减少感知加载时间
- 提升流畅度
- 改善用户体验

**优先级**：🟡 中

---

### 7. 私有仓库图片访问权限控制

**功能描述**：

- **自动仓库类型检测**：自动检测 GitHub/Gitee 仓库是否为私有
- **私有仓库图片访问**：
  - 对于私有仓库，在 URL 中添加 token 参数（Gitee 支持）
  - GitHub 私有仓库：使用 Contents API 获取 base64 内容，转换为 blob URL
  - Gitee 私有仓库：在 raw URL 中添加 `access_token` 参数
- **向下兼容**：
  - 公开仓库的访问方式完全不变
  - 现有配置无需修改即可继续使用
  - 检测失败时默认假设为公开仓库（保守策略）
- **性能优化**：
  - 缓存仓库类型检测结果
  - 优化私有仓库图片加载性能
  - 处理 blob URL 的创建和清理

**实现建议**：

- 在 `GitHubStorageService` 和 `GiteeStorageService` 中添加 `detectRepoType()`
  方法
- 修改 `getRawUrl()` 方法，根据仓库类型选择 URL 生成策略
- 实现 GitHub 私有仓库的 Contents API 调用和 base64 解码
- 缓存仓库类型检测结果，避免重复请求
- 参考设计文档：`docs/design/private-repo-image-access.md`

**预期效果**：

- 支持私有仓库的图片访问
- 保证向下兼容性
- 满足企业用户需求
- 提升移动端使用体验

**优先级**：🟡 中

---

### 8. 错误处理增强

**功能描述**：

- 网络错误重试：自动重试失败的请求
- 上传失败重试：支持重新上传失败的图片
- 更明确的错误提示：提供详细的错误信息和解决建议

**实现建议**：

- 在 `githubStorageService` 中增强错误处理
- 添加重试机制和错误恢复
- 优化错误提示 UI

**预期效果**：

- 提升应用稳定性
- 减少用户困扰
- 改善错误恢复能力

**优先级**：🟡 中

---

### 9. 离线支持

**功能描述**：

- 离线浏览：离线时浏览已缓存的图片
- 离线上传队列：网络恢复后自动同步
- 网络状态检测：显示网络连接状态

**实现建议**：

- 使用 `@react-native-community/netinfo` 检测网络
- 实现上传队列管理
- 优化缓存策略

**预期效果**：

- 支持离线使用
- 提升可用性
- 改善弱网体验

**优先级**：🟡 中

---

### 9. 手势操作增强

**功能描述**：

- 长按菜单：长按显示操作菜单（编辑、删除、分享）
- 滑动删除：在预览页滑动删除
- 双击缩放：双击图片放大/缩小

**实现建议**：

- 使用 `react-native-gesture-handler`
- 实现手势识别和处理
- 添加动画效果

**预期效果**：

- 提升操作便捷性
- 符合移动端习惯
- 改善交互体验

**优先级**：🟡 中

---

## 🟢 低优先级（增强功能）

### 10. AI 功能集成

**功能描述**：

- 自动标签生成：AI 自动为图片生成标签
- 场景识别：自动识别场景类型
- OCR 文字提取：提取图片中的文字
- 物体检测：识别图片中的物体

**实现建议**：

- 集成 AI 分析服务
- 添加分析结果展示
- 实现批量分析功能

**预期效果**：

- 提升图片管理智能化
- 自动分类和标记
- 增强搜索能力

**优先级**：🟢 低

---

### 11. 收藏与分组

**功能描述**：

- 收藏功能：标记喜欢的图片
- 自定义分组/相册：创建自定义分组
- 标签管理：统一管理所有标签

**实现建议**：

- 在 `imageStore` 中添加收藏状态
- 创建分组管理功能
- 实现标签管理界面

**预期效果**：

- 更好的图片组织
- 快速访问常用图片
- 提升管理效率

**优先级**：🟢 低

---

### 12. 统计信息

**功能描述**：

- 存储使用量：显示已使用的存储空间
- 图片总数统计：显示图片数量统计
- 上传历史：查看上传历史记录

**实现建议**：

- 添加统计信息页面
- 计算和显示存储使用情况
- 记录上传历史

**预期效果**：

- 了解使用情况
- 便于管理存储
- 提供数据洞察

**优先级**：🟢 低

---

### 13. 快捷操作

**功能描述**：

- 最近上传快速入口：快速访问最近上传的图片
- 常用标签快捷选择：快速选择常用标签
- 快捷上传：使用最近使用的标签快速上传

**实现建议**：

- 添加快捷操作组件
- 记录用户使用习惯
- 实现智能推荐

**预期效果**：

- 提升操作效率
- 减少重复操作
- 个性化体验

**优先级**：🟢 低

---

### 14. 动画与过渡

**功能描述**：

- 页面切换动画：流畅的页面过渡动画
- 图片加载动画：优雅的图片加载动画
- 操作反馈动画：操作成功/失败的动画反馈

**实现建议**：

- 使用 `react-native-reanimated`
- 添加过渡动画
- 优化动画性能

**预期效果**：

- 提升视觉体验
- 增强交互反馈
- 现代化 UI

**优先级**：🟢 低

---

### 15. 可访问性支持

**功能描述**：

- 屏幕阅读器支持：支持 VoiceOver/TalkBack
- 键盘导航：支持键盘操作
- 字体大小调整：支持系统字体大小

**实现建议**：

- 添加无障碍标签
- 实现键盘导航
- 支持动态字体大小

**预期效果**：

- 提升可访问性
- 支持更多用户
- 符合无障碍标准

**优先级**：🟢 低

---

### 16. 性能优化

**功能描述**：

- 图片缓存策略：优化图片缓存机制
- 虚拟列表：使用虚拟列表处理大量图片
- 图片压缩缓存：缓存压缩后的图片

**实现建议**：

- 实现虚拟滚动
- 优化缓存策略
- 减少内存占用

**预期效果**：

- 提升性能
- 减少内存使用
- 支持更多图片

**优先级**：🟢 低

---

### 17. 分享与协作

**功能描述**：

- 生成分享链接：生成图片的分享链接
- 二维码分享：生成二维码快速分享
- 协作功能：支持多人编辑和评论

**实现建议**：

- 实现链接生成功能
- 集成二维码生成库
- 添加协作功能

**预期效果**：

- 方便分享
- 支持协作
- 提升社交功能

**优先级**：🟢 低

---

## 📊 优先级总结

| 优先级      | 功能数量 | 已完成 | 预计工作量 | 建议完成时间 |
| ----------- | -------- | ------ | ---------- | ------------ |
| 🔴 高优先级 | 4 项     | 1 项   | 2-3 周     | 1-2 个月     |
| 🟡 中优先级 | 6 项     | 0 项   | 4-5 周     | 2-3 个月     |
| 🟢 低优先级 | 8 项     | 0 项   | 4-6 周     | 3-6 个月     |

---

## 🎯 推荐实施顺序

### 第一阶段（核心功能）

1. ✅ 搜索和筛选功能（已完成）
2. ✅ 元数据缓存优化（已完成）
3. ✅ 刷新元数据功能（已完成）
4. ✅ 图片处理功能（已完成）
5. ✅ 图片详情增强（已完成）
6. ✅ Gitee 配置管理（已完成）
7. ✅ 相机集成（已完成）
8. 🔄 批量上传功能
9. 🔄 批量编辑功能

### 第二阶段（体验优化）

10. 🔄 网格布局优化
11. 🔄 加载体验优化
12. 🔄 私有仓库图片访问权限控制
13. 🔄 错误处理增强

### 第三阶段（增强功能）

14. 🔄 离线支持
15. 🔄 手势操作增强
16. 🔄 AI 功能集成
17. 🔄 其他增强功能

---

## 📝 实施建议

1. **分阶段实施**：按优先级分阶段实施，确保核心功能优先
2. **用户反馈**：每个功能完成后收集用户反馈
3. **性能监控**：关注性能指标，确保新功能不影响性能
4. **测试覆盖**：为每个新功能添加测试用例
5. **文档更新**：及时更新文档和用户指南

---

## 🔗 相关资源

- [React Native 文档](https://reactnative.dev/)
- [Expo 文档](https://docs.expo.dev/)
- [React Navigation](https://reactnavigation.org/)
- [Zustand 状态管理](https://github.com/pmndrs/zustand)

---

**最后更新**：2025-11-19 **维护者**：trueLoving
