# 更新日志

本文档记录了 Pixuli 所有平台（桌面端、Web 端、移动端）的重要变更。

格式基于
[Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，版本号遵循[语义化版本](https://semver.org/lang/zh-CN/)。

## 🖥️ 桌面端

### [1.3.0][1.3.0] - 2025-11-21

#### ✨ 新增功能

- **元数据标签增强**：支持添加多个标签，修复上传时标签数据丢失问题
- **图片浏览器界面优化**：统一卡片高度，修复列表模式问题
- **仓库源管理布局优化**：改为垂直列表布局，添加折叠动画效果
- **图片上传组件增强**：添加图片压缩功能

#### 🔧 改进

- 修复桌面端图片上传/编辑/删除后全屏 loading 卡住问题
- 优化图片尺寸和文件大小获取逻辑
- 优化 Gitee 存储服务元数据加载
- 优化 release-desktop 流水线，支持选择不同分支和平台发布
- 代码优化和功能优化

#### 🐛 修复

- 修复 TypeScript 编译错误
- 修复 Gitee 存储服务元数据加载问题
- 修复元数据标签功能相关问题

#### 🗑️ 移除

- **下架又拍云仓库源支持**：移除又拍云存储支持

#### 🎯 技术特性

- 升级所有端到 React 19.1.0
- 实现幻灯片播放功能并迁移到公共组件库

---

### [1.2.0][1.2.0] - 2025-10-26

#### ✨ 新增功能

- **操作日志功能**：实现完整的操作日志记录和查看功能
- **图片批量删除**：支持批量选择和删除图片
- **Gitee 存储支持**：添加 Gitee 作为仓库源，支持 GitHub 和 Gitee 双存储
  - Gitee 配置页面
  - 配置导入/导出功能
  - 配置清除功能
  - GitHub 和 Gitee 配置可共存
- **系统托盘功能**：支持系统托盘，可从托盘打开图片压缩和转换独立窗口
- **版本信息查看**：添加版本信息查看功能
- **左侧菜单折叠**：支持左侧菜单折叠功能，状态持久化
- **ESC 快捷键**：支持 ESC 快捷键关闭弹窗和模态框
- **图片预览增强**：图片预览增加左右箭头，可切换当前预览图片
- **AI 分析优化**：迁移 AI 分析到 Rust WASM，优化标签和描述生成
- **图片尺寸优化**：优化图片尺寸和文件大小获取逻辑

#### 🔧 改进

- 重构目录结构并优化数据管理
- 完成组件国际化和图片压缩服务整理
- 优化 WASM 模块构建和验证流程
- 支持多架构 Mac 构建和 Linux 平台
- 优化 electron-builder 配置，排除 pixuli-wasm 无用文件
- 修复桌面端布局滚动问题
- 统一弹窗组件的打开/关闭方式
- 优化 App.tsx 数据管理，将组件内部状态移到对应组件

#### 🎯 技术特性

- 重构项目为 monorepo 结构
- 整合 web 端和桌面端公共组件到 packages/ui
- 使用 packages/ui 组件替换 desktop 中的重复组件
- 移除 Tailwind CSS 依赖，改用自定义 CSS 样式
- 添加 Prettier 代码格式化工具
- 语言包重构，Toast 国际化修复
- Electron CSP 安全配置优化

---

### [1.1.0][1.1.0] - 2025-09-15

#### ✨ 新增功能

- **图片压缩功能**：新增独立压缩窗口
  - WebP 压缩支持
  - 可调节压缩质量（10%-100%）
  - 批量压缩功能
  - 压缩预览功能
- **图片格式转换功能**：新增独立转换窗口
  - 支持 JPEG、PNG、WebP 格式转换
  - 批量格式转换
  - 转换预览功能
- **GitHub 配置管理增强**
  - 配置导入/导出功能
  - 配置清除功能
- **又拍云存储支持**（后续版本已下架）
- **菜单功能**：添加应用菜单栏功能
- **国际化完善**：完善图片组件国际化功能支持
- **布局优化**：重构桌面端布局组件

#### 🔧 改进

- 修复构建问题
- 优化文档结构和内容
- 修复 wasm 导入保持的问题

---

### [1.0.0][1.0.0] - 2025-09-13

#### ✨ 新增功能

- 首次发布桌面版本
- **图片管理**
  - 图片网格展示（响应式布局）
  - 拖拽上传（单张/批量）
  - 全屏预览（支持缩放和旋转）
  - 元数据查看（名称、尺寸、描述、标签）
  - 搜索功能（按名称、描述、标签）
  - 标签系统（添加、过滤）
- **GitHub 存储集成**
  - GitHub 配置管理
  - 使用 GitHub 仓库作为图片存储后端
- **主题切换**：支持浅色/深色主题
- **多语言支持**：中文和英文界面切换
- **多窗口管理**：支持主窗口、压缩窗口、转换窗口、AI 分析窗口

#### 🎯 技术特性

- 基于 Electron + React + TypeScript 构建
- 使用 Rust WASM 模块实现高性能图片处理
- 支持 macOS (x64, ARM64) 和 Windows (x64)
- 重构 WASM 模块并优化 AI 分析功能

---

## 🌐 Web 端

### [未发布]

#### ✨ 新增功能

- **幻灯片播放功能**：支持幻灯片模式浏览图片，多种过渡效果
- **Gitee 存储支持**：添加 Gitee 作为仓库源，支持 GitHub 和 Gitee 双存储
  - Gitee 配置页面
  - 配置导入/导出功能
  - 配置清除功能
  - GitHub 和 Gitee 配置可共存
  - Vercel 代理支持 Gitee 图片资源访问
- **图片上传组件增强**：添加图片压缩和裁剪功能
- **完整的 PWA 功能**：实现完整的渐进式 Web 应用功能
  - 安装到主屏幕
  - 离线支持
  - 后台同步
  - 推送通知

#### 🔧 改进

- 优化图片尺寸和文件大小获取逻辑
- 优化图片搜索性能
- 优化 web 端版本信息，添加 Git 分支和 commit 信息
- web 端打包优化，配置代码分包策略
- 添加页面加载动画，与桌面端保持一致
- 语言包重构，Toast 国际化修复
- 优化 App.tsx 数据管理，将组件内部状态移到对应组件
- 简化图片裁剪功能，移除多形状裁剪，只保留矩形裁剪
- 重构 UI 组件和类型定义
- 整合 web 端和桌面端公共组件到 packages/ui

#### 🐛 修复

- 修复 web 端演示模式下国际化语言显示异常的问题
- 修复 web 端 metadata URL 格式并使用 warning 替代 error
- 修复 vercel 平台部署报错
- 暂时禁用 PWA 缓存功能和更新提示

#### 🎯 技术特性

- 升级所有端到 React 19.1.0
- 重构主题系统，为 web 应用创建独立的主题管理
- 移除 Tailwind CSS 依赖，改用自定义 CSS 样式
- 完善国际化功能和组件重构
- 添加 Prettier 代码格式化工具
- 添加演示环境支持和环境变量配置

---

## 📱 移动端

### [1.0.0][1.0.0-mobile] - 2025-11-21

#### ✨ 新增功能

- 首次发布 Android 版本
- **图片管理**：浏览、上传、删除、预览
- **图片处理**：压缩、格式转换、尺寸调整、裁剪
- **云端存储**：GitHub 和 Gitee 集成
- **搜索筛选**：支持名称搜索、标签/尺寸/日期筛选、多种排序
- **相机集成**：拍照上传、拍照后编辑
- **幻灯片播放**：支持自动播放、顺序/随机模式、多种过渡效果
  - 自动播放：可配置播放间隔和自动播放模式
  - 播放模式：支持顺序播放和随机播放
  - 过渡效果：淡入淡出、滑动、缩放等多种过渡动画
  - 循环播放：支持循环播放所有图片
  - 播放控制：播放/暂停/停止、上一张/下一张
  - 图片列表：侧边栏显示所有图片缩略图
  - 图片信息：可显示/隐藏图片元数据信息
- **主题切换**：浅色/深色/自动主题
- **多语言支持**：中文和英文界面
- **响应式设计**：适配不同屏幕尺寸

#### 🎯 技术特性

- 基于 React Native 0.81.5 构建
- 使用 Expo SDK 54
- TypeScript 类型安全
- 流畅的动画和交互体验

#### ⚠️ 已知问题

- iOS 版本暂未发布
- 批量上传功能正在开发中

---

[未发布]: https://github.com/trueLoving/Pixuli/compare/v1.3.0-desktop...HEAD

<!-- 桌面端 -->

[1.3.0]: https://github.com/trueLoving/Pixuli/releases/tag/v1.3.0-desktop
[1.2.0]: https://github.com/trueLoving/Pixuli/releases/tag/v1.2.0-desktop
[1.1.0]: https://github.com/trueLoving/Pixuli/releases/tag/v1.1.0-desktop
[1.0.0]: https://github.com/trueLoving/Pixuli/releases/tag/v1.0.0-desktop

<!-- 移动端 -->

[1.0.0-mobile]: https://github.com/trueLoving/Pixuli/releases/tag/v1.0.0-mobile
