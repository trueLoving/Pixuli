# 图片压缩性能对比测试

这个目录包含了 WASM 和 JavaScript 图片压缩功能的性能对比测试。

## 测试文件

- `simple-compression-bench.ts` - 简化的基准测试，使用模拟图片数据
- `detailed-bench.ts` - 详细基准测试，包含多种测试场景和性能分析

## 安装依赖

```bash
cd wasm/benchmark
pnpm install
```

## 运行测试

### 简化基准测试（推荐）
```bash
pnpm run bench
```

### 详细基准测试
```bash
pnpm run bench:detailed
```

## 测试内容

### 性能对比
- **WASM WebP 压缩** vs **JavaScript 压缩**
- 不同图片大小的性能表现
- 批量压缩性能对比
- 内存使用情况对比

### 压缩效果对比
- 压缩率对比
- 不同质量设置的效果
- 无损压缩支持

### 测试指标
- 处理时间（毫秒）
- 压缩率（百分比）
- 内存使用（MB）
- 性能提升（百分比）

## 预期结果

根据测试，WASM WebP 压缩相比 JavaScript 压缩通常具有以下优势：

- ⚡ **更快的处理速度** - 通常快 2-10 倍
- 📦 **更好的压缩效果** - WebP 格式压缩率更高
- 💾 **更低的内存使用** - 原生代码更高效
- 🎯 **更精确的质量控制** - 支持 0-100 质量设置

## 注意事项

1. 测试结果可能因硬件配置而异
2. 首次运行可能需要编译 WASM 模块
3. 真实图片测试会创建临时文件，测试完成后自动清理
4. 建议在相同环境下多次运行以获得准确结果
