# ImageGrid ç»„ä»¶ - å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–

## åŠŸèƒ½ç‰¹æ€§

### ğŸ–¼ï¸ å›¾ç‰‡æ‡’åŠ è½½ (Lazy Loading)
- **æŒ‰éœ€åŠ è½½**: å›¾ç‰‡åªåœ¨è¿›å…¥è§†å£æ—¶æ‰å¼€å§‹åŠ è½½
- **å¸¦å®½ä¼˜åŒ–**: å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼ŒèŠ‚çœå¸¦å®½
- **ç”¨æˆ·ä½“éªŒ**: æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œæä¾›è§†è§‰åé¦ˆ
- **æ™ºèƒ½é¢„åŠ è½½**: æ”¯æŒé…ç½®é¢„åŠ è½½é˜ˆå€¼å’Œè¾¹è·
- **å¸ƒå±€ä¿æŒ**: ä¿æŒåŸæœ‰çš„å“åº”å¼ç½‘æ ¼å¸ƒå±€ä¸å˜

### ğŸ¨ åŸæœ‰å¸ƒå±€ä¿æŒ
- **ç½‘æ ¼å¸ƒå±€**: ä¿æŒ `grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6` çš„å“åº”å¼å¸ƒå±€
- **è§†è§‰æ•ˆæœ**: ä¿æŒåŸæœ‰çš„æ‚¬åœæ•ˆæœã€é˜´å½±å’ŒåŠ¨ç”»
- **å“åº”å¼è®¾è®¡**: åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹è‡ªåŠ¨è°ƒæ•´åˆ—æ•°

## æŠ€æœ¯å®ç°

### æ‡’åŠ è½½æœºåˆ¶
```typescript
// ä½¿ç”¨ Intersection Observer API
const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      // å¼€å§‹åŠ è½½å›¾ç‰‡
      loadImage(entry.target)
    }
  })
}, { threshold: 0.1, rootMargin: '50px' })
```

### å¸ƒå±€ä¿æŒ
```tsx
// ä¿æŒåŸæœ‰çš„ç½‘æ ¼å¸ƒå±€
<div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4">
  {images.map((image) => (
    <ImageItem key={image.id} image={image} />
  ))}
</div>
```

## é…ç½®é€‰é¡¹

### æ‡’åŠ è½½é…ç½®
```typescript
const LAZY_LOAD_CONFIG = {
  threshold: 0.1,         // è§¦å‘é˜ˆå€¼ï¼ˆ0-1ï¼‰
  rootMargin: '50px',     // é¢„åŠ è½½è¾¹è·
}
```

## æ€§èƒ½ä¼˜åŒ–

### ç½‘ç»œä¼˜åŒ–
- **åˆå§‹åŠ è½½**: åªåŠ è½½é¦–å±å¯è§çš„å›¾ç‰‡
- **æŒ‰éœ€åŠ è½½**: æ»šåŠ¨æ—¶åŠ¨æ€åŠ è½½æ–°å›¾ç‰‡
- **é¢„åŠ è½½**: æ™ºèƒ½é¢„åŠ è½½å³å°†å¯è§çš„å›¾ç‰‡

### ç”¨æˆ·ä½“éªŒ
- **åŠ è½½åŠ¨ç”»**: æ˜¾ç¤ºæ—‹è½¬çš„åŠ è½½æŒ‡ç¤ºå™¨
- **å¹³æ»‘è¿‡æ¸¡**: å›¾ç‰‡åŠ è½½å®Œæˆåçš„å¹³æ»‘æ˜¾ç¤º
- **å“åº”å¼**: åœ¨ä¸åŒè®¾å¤‡ä¸Šä¿æŒä¸€è‡´çš„ä½“éªŒ

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•
```tsx
import { ImageGrid } from '@/components/image-grid'

function App() {
  const images = useImageStore(state => state.images)
  
  return (
    <div className="container mx-auto p-4">
      <ImageGrid images={images} />
    </div>
  )
}
```

### è‡ªå®šä¹‰é…ç½®
```tsx
// å¯ä»¥é€šè¿‡ä¿®æ”¹ CSS å˜é‡æ¥è‡ªå®šä¹‰æ ·å¼
:root {
  --lazy-load-threshold: 0.1;
  --lazy-load-margin: 50px;
}
```

## æµè§ˆå™¨å…¼å®¹æ€§

### å¿…éœ€ API
- **Intersection Observer**: ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒ
- **CSS Grid**: å¸ƒå±€æ”¯æŒ

### æ”¯æŒç‰ˆæœ¬
- Chrome 51+
- Firefox 55+
- Safari 12.1+
- Edge 79+

## æœ€ä½³å®è·µ

### 1. å›¾ç‰‡ä¼˜åŒ–
- ä½¿ç”¨é€‚å½“çš„å›¾ç‰‡å°ºå¯¸ï¼Œé¿å…è¿‡å¤§çš„å›¾ç‰‡æ–‡ä»¶
- è€ƒè™‘ä½¿ç”¨ WebP æ ¼å¼æå‡åŠ è½½æ€§èƒ½
- å®ç°æ¸è¿›å¼å›¾ç‰‡åŠ è½½

### 2. æ€§èƒ½ç›‘æ§
```typescript
// ç›‘æ§å›¾ç‰‡åŠ è½½æ€§èƒ½
useEffect(() => {
  const startTime = performance.now()
  // å›¾ç‰‡åŠ è½½å®Œæˆå
  const endTime = performance.now()
  console.log(`å›¾ç‰‡åŠ è½½è€—æ—¶: ${endTime - startTime}ms`)
}, [images])
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å›¾ç‰‡ä¸æ˜¾ç¤º**
   - æ£€æŸ¥å›¾ç‰‡ URL æ˜¯å¦æœ‰æ•ˆ
   - ç¡®è®¤ Intersection Observer æ˜¯å¦æ”¯æŒ
   - æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

2. **å¸ƒå±€é”™ä¹±**
   - ç¡®ä¿å®¹å™¨æœ‰è¶³å¤Ÿçš„å®½åº¦
   - æ£€æŸ¥ CSS Grid æ˜¯å¦æ”¯æŒ
   - éªŒè¯å“åº”å¼æ–­ç‚¹è®¾ç½®

### è°ƒè¯•æŠ€å·§
```typescript
// å¯ç”¨è°ƒè¯•æ¨¡å¼
const DEBUG = process.env.NODE_ENV === 'development'

if (DEBUG) {
  console.log('æ‡’åŠ è½½çŠ¶æ€:', { visibleImages: visibleImages.size })
}
```

## æœªæ¥ä¼˜åŒ–

### è®¡åˆ’åŠŸèƒ½
- [ ] æ”¯æŒå›¾ç‰‡é¢„åŠ è½½ç­–ç•¥
- [ ] æ·»åŠ å›¾ç‰‡åŠ è½½å¤±è´¥é‡è¯•
- [ ] å®ç°å›¾ç‰‡å‹ç¼©å’Œæ ¼å¼è½¬æ¢
- [ ] æ”¯æŒè§¦æ‘¸è®¾å¤‡æ‰‹åŠ¿

### æ€§èƒ½æå‡
- [ ] æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- [ ] å›¾ç‰‡å°ºå¯¸è‡ªé€‚åº”
- [ ] æ¸è¿›å¼å›¾ç‰‡åŠ è½½
- [ ] å›¾ç‰‡è´¨é‡ä¼˜åŒ– 