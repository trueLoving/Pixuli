# Pixuli WASM

Pixuli 的 WebAssembly 核心库，提供高性能的图片处理功能。

## 功能特性

### 🖼️ 图片压缩

- **WebP 压缩**: 支持有损和无损压缩
- **批量处理**: 支持多张图片同时压缩
- **质量控制**: 可调节压缩质量
- **性能优化**: 使用 Rust 实现，性能卓越

### 🔄 图片格式转换

- **多格式支持**: JPEG、PNG、WebP、GIF、BMP、TIFF
- **智能转换**: 自动处理透明度和颜色空间
- **尺寸调整**: 支持图片尺寸调整和宽高比保持
- **批量转换**: 支持多张图片批量格式转换

### 🤖 AI 图片分析

- **内容识别**: 自动识别图片中的物体和场景
- **颜色分析**: 提取主要颜色和色彩分布
- **标签生成**: 自动生成描述性标签
- **多模型支持**: 支持 TensorFlow、TensorFlow Lite、ONNX 等模型

## 技术架构

### 核心技术栈

- **Rust**: 主要开发语言
- **NAPI-RS**: Node.js 原生模块绑定
- **image-rs**: 图片处理核心库
- **webp**: WebP 格式支持
- **serde**: 序列化支持

### 构建系统

- **Cargo**: Rust 包管理器
- **NAPI**: 跨平台 Node.js 原生模块构建
- **Cross-compilation**: 支持多平台编译

## 安装使用

### 开发环境要求

- Rust 1.70+
- Node.js 16+
- 平台相关构建工具

### 构建命令

```bash
# 开发构建
pnpm run build:debug

# 生产构建
pnpm run build

# 查看构建产物
pnpm run artifacts
```

## 主要功能

### 压缩功能

- WebP 格式压缩，支持有损和无损模式
- 批量图片压缩处理
- 可调节压缩质量参数
- 返回详细的压缩统计信息

### 格式转换

- 支持多种图片格式之间的转换
- 智能处理透明度和颜色空间
- 支持图片尺寸调整
- 批量格式转换功能

### AI 分析

- 图片内容识别和分析
- 主要颜色提取
- 自动标签生成
- 支持多种 AI 模型

### 工具函数

- 图片信息获取
- 格式检测
- 基础测试功能

## 性能特点

### 压缩性能

- WebP 压缩比 JPEG 小 25-35%，比 PNG 小 25-50%
- 单张 2MB 图片压缩时间小于 100ms
- 流式处理，内存占用低

### 格式转换性能

- 支持 6 种主流格式无缝转换
- 根据目标格式自动优化参数
- 支持并发处理多张图片

### AI 分析性能

- 支持多种 AI 模型格式
- 本地推理，响应迅速
- 基于成熟模型，识别准确

## 开发指南

### 项目结构

- `src/`: Rust 源代码目录
- `src/webp.rs`: WebP 压缩功能模块
- `src/image.rs`: 图片处理基础功能
- `src/ai/`: AI 分析功能模块
- `src/format_conversion.rs`: 格式转换功能

### 测试

- 所有功能模块都包含完整的单元测试
- 使用 `cargo test` 运行测试
- 测试代码集成在源代码中，使用条件编译

### 构建和部署

- 使用 Cargo 管理 Rust 依赖
- 通过 NAPI 生成 Node.js 原生模块
- 支持多平台交叉编译

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

---

**Pixuli WASM** - 让图片处理更简单、更快速、更智能 🚀
