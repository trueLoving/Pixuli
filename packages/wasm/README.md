# Pixuli WASM

Pixuli çš„ WebAssembly æ ¸å¿ƒåº“ï¼Œæä¾›é«˜æ€§èƒ½çš„å›¾ç‰‡å¤„ç†åŠŸèƒ½ã€‚æ”¯æŒ Web å’Œ Node.js å¤šå¹³å°ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸŒ å¤šå¹³å°æ”¯æŒ

- **Web ç«¯**: æµè§ˆå™¨ç¯å¢ƒï¼Œä½¿ç”¨ ES6 æ¨¡å— âœ…
- **Node.js**: Node.js å’Œ Electron ä¸»è¿›ç¨‹ï¼Œä½¿ç”¨ CommonJS âœ…

### ğŸ–¼ï¸ å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼ˆå¼€å‘ä¸­ï¼‰

- **å›¾ç‰‡æ ¼å¼è½¬æ¢**: æ”¯æŒ JPEGã€PNGã€GIFã€BMPã€TIFF ç­‰æ ¼å¼è½¬æ¢
- **å›¾ç‰‡å‹ç¼©**: WebP å‹ç¼©åŠŸèƒ½ï¼ˆæš‚æ—¶ç¦ç”¨ï¼Œç­‰å¾…çº¯ Rust å®ç°ï¼‰
- **å›¾ç‰‡åˆ†æ**: AI å›¾ç‰‡åˆ†æåŠŸèƒ½
- **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤šå¼ å›¾ç‰‡æ‰¹é‡å¤„ç†

### ğŸ§ª æµ‹è¯•åŠŸèƒ½

- **plus_100**: ç®€å•çš„æµ‹è¯•å‡½æ•°ï¼Œç”¨äºéªŒè¯ WASM æ¨¡å—åŠ è½½

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Rust**: ä¸»è¦å¼€å‘è¯­è¨€
- **wasm-bindgen**: WebAssembly ç»‘å®šç”Ÿæˆå·¥å…·
- **wasm-pack**: WASM æ„å»ºå’Œæ‰“åŒ…å·¥å…·
- **image-rs**: å›¾ç‰‡å¤„ç†æ ¸å¿ƒåº“
- **serde**: åºåˆ—åŒ–æ”¯æŒ

### æ„å»ºç³»ç»Ÿ

- **Cargo**: Rust åŒ…ç®¡ç†å™¨
- **wasm-pack**: è·¨å¹³å° WASM æ„å»ºå·¥å…·
- **å¤šç›®æ ‡æ„å»º**: æ”¯æŒ webã€nodejsã€bundler ä¸‰ç§ç›®æ ‡

## å®‰è£…ä½¿ç”¨

### å¼€å‘ç¯å¢ƒè¦æ±‚

- Rust 1.70+
- Node.js 14+
- wasm-packï¼ˆé€šè¿‡ `cargo install wasm-pack` å®‰è£…ï¼‰

### æ„å»ºå‘½ä»¤

```bash
# æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬ï¼ˆç”Ÿäº§ï¼‰
pnpm run build:wasm

# æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬ï¼ˆå¼€å‘ï¼‰
pnpm run build:wasm:dev

# åˆ†åˆ«æ„å»ºå„å¹³å°ç‰ˆæœ¬
pnpm run build:wasm:web      # Web ç‰ˆæœ¬
pnpm run build:wasm:node     # Node.js ç‰ˆæœ¬
```

### ä½¿ç”¨ç¤ºä¾‹

#### Web ç«¯

```javascript
import { init, plus100 } from 'pixuli-wasm';

// åˆå§‹åŒ– WASM æ¨¡å—
await init();

// ä½¿ç”¨åŠŸèƒ½
const result = await plus100(50);
console.log(result); // 150
```

#### Node.js / Electron

```javascript
const { init, plus100 } = require('pixuli-wasm');

// åˆå§‹åŒ– WASM æ¨¡å—
await init();

// ä½¿ç”¨åŠŸèƒ½
const result = await plus100(50);
console.log(result); // 150
```

## é¡¹ç›®ç»“æ„

```
packages/wasm/
â”œâ”€â”€ src/                    # Rust æºä»£ç 
â”‚   â”œâ”€â”€ lib.rs             # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ image.rs           # å›¾ç‰‡ä¿¡æ¯è·å–
â”‚   â”œâ”€â”€ compress/          # å‹ç¼©åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ convert/           # æ ¼å¼è½¬æ¢æ¨¡å—
â”‚   â””â”€â”€ analyze/           # AI åˆ†ææ¨¡å—
â”œâ”€â”€ pkg-web/               # Web ç‰ˆæœ¬æ„å»ºäº§ç‰©
â”œâ”€â”€ pkg-node/              # Node.js ç‰ˆæœ¬æ„å»ºäº§ç‰©
â”œâ”€â”€ index.js               # ES6 æ¨¡å—å…¥å£ï¼ˆWeb ç«¯ï¼‰
â”œâ”€â”€ index.cjs              # CommonJS å…¥å£ï¼ˆNode.jsï¼‰
â””â”€â”€ index.d.ts             # TypeScript ç±»å‹å®šä¹‰
```

## å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ

- [x] WASM å¤šå¹³å°æ„å»ºé…ç½®ï¼ˆwebã€nodejsã€bundlerï¼‰
- [x] ç»Ÿä¸€å…¥å£æ¨¡å—ï¼ˆè‡ªåŠ¨ç¯å¢ƒæ£€æµ‹ï¼‰
- [x] ES6 å’Œ CommonJS åŒæ¨¡å—æ”¯æŒ
- [x] plus_100 æµ‹è¯•å‡½æ•°
- [x] TypeScript ç±»å‹å®šä¹‰
- [x] Web ç«¯ WASM æ”¯æŒ
- [x] Node.js ç«¯ WASM æ”¯æŒ

### ğŸš§ å¼€å‘ä¸­

- [ ] å›¾ç‰‡æ ¼å¼è½¬æ¢åŠŸèƒ½ï¼ˆä»£ç å·²å®ç°ï¼Œå¾…å¯ç”¨ï¼‰
- [ ] å›¾ç‰‡ä¿¡æ¯è·å–åŠŸèƒ½ï¼ˆä»£ç å·²å®ç°ï¼Œå¾…å¯ç”¨ï¼‰
- [ ] AI å›¾ç‰‡åˆ†æåŠŸèƒ½ï¼ˆä»£ç å·²å®ç°ï¼Œå¾…å¯ç”¨ï¼‰

### âš ï¸ å·²çŸ¥é—®é¢˜

- **WebP å‹ç¼©åŠŸèƒ½æš‚æ—¶ç¦ç”¨**: `webp`
  crate ä¾èµ– C ä»£ç ï¼Œåœ¨ WASM ç›®æ ‡ä¸Šæ— æ³•ç¼–è¯‘ã€‚éœ€è¦å¯»æ‰¾çº¯ Rust å®ç°çš„ WebP åº“æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆã€‚

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/` ç›®å½•ä¸‹ç¼–å†™ Rust ä»£ç 
2. ä½¿ç”¨ `#[wasm_bindgen]` å®å¯¼å‡ºå‡½æ•°
3. åœ¨ `index.js` å’Œ `index.cjs` ä¸­æ·»åŠ å¯¹åº”çš„å¯¼å‡º
4. æ›´æ–° `index.d.ts` ç±»å‹å®šä¹‰
5. è¿è¡Œ `pnpm run build:wasm` é‡æ–°æ„å»º

### æµ‹è¯•

```bash
# è¿è¡Œ Rust å•å…ƒæµ‹è¯•
cargo test

# è¿è¡Œ JavaScript æµ‹è¯•ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
pnpm run test
```

### è°ƒè¯•

- Web ç«¯ï¼šä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- Node.jsï¼šä½¿ç”¨ Node.js è°ƒè¯•å™¨

## æ€§èƒ½ç‰¹ç‚¹

- **è·¨å¹³å°**: åŒä¸€å¥—ä»£ç ï¼Œæ”¯æŒ Webã€Node.js
- **é«˜æ€§èƒ½**: Rust ç¼–è¯‘ä¸º WASMï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ
- **å°ä½“ç§¯**: WASM äºŒè¿›åˆ¶æ–‡ä»¶ç»è¿‡ä¼˜åŒ–ï¼Œä½“ç§¯å°
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**Pixuli WASM** - è®©å›¾ç‰‡å¤„ç†æ›´ç®€å•ã€æ›´å¿«é€Ÿã€æ›´æ™ºèƒ½ ğŸš€
